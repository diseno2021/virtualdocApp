(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative-position",style:t.visible?"height: 92Vh":""},[!t.visible&&t.pacientes.length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-md"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:"full-width",attrs:{rounded:"",standout:"bg-blue-11 text-white","bottom-slots":"",label:"Buscar por nombre"},on:{input:t.filtrarPacientes},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:t.clearSearch}})]},proxy:!0}],null,!1,3046660841),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"row items-center justify-center"},[a("div",{staticClass:"col-12"},[t.$q.screen.width>599?a("span",{staticClass:"q-ml-xl"},[t._v("Ordenar por:")]):t._e(),a("q-select",{staticClass:"inline q-mx-md",attrs:{rounded:"",options:t.orderByOptions,dense:""},on:{input:t.filtrarPacientes},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"sort"}})]},proxy:!0}],null,!1,589617910),model:{value:t.orderBy,callback:function(e){t.orderBy=e},expression:"orderBy"}}),a("q-btn",{staticClass:"q-mr-xl",attrs:{disabled:""==t.orderBy,round:"",color:"grey",size:"sm",icon:1==t.orderDescend?"arrow_downward":"arrow_upward"},on:{click:t.changeOrder}}),t.$q.screen.width>599?a("span",[t._v("Filtrar género:")]):t._e(),a("q-btn-toggle",{staticClass:"q-ml-md q-mr-lg",attrs:{"toggle-color":"grey-5",size:"sm",options:t.optionFilters},on:{input:t.filtrarPacientes},scopedSlots:t._u([{key:"todos",fn:function(){return[a("q-icon",{staticClass:"text-blue",attrs:{name:"male"}}),a("q-icon",{staticClass:"text-pink",attrs:{name:"female"}}),a("q-tooltip",[t._v("\n                Todos\n              ")])]},proxy:!0},{key:"Masculino",fn:function(){return[a("q-icon",{staticClass:"text-blue",attrs:{name:"male"}}),a("q-tooltip",[t._v("\n                Solo Hombres\n              ")])]},proxy:!0},{key:"Femenino",fn:function(){return[a("q-icon",{staticClass:"text-pink",attrs:{name:"female"}}),a("q-tooltip",[t._v("\n                Solo Mujeres\n              ")])]},proxy:!0}],null,!1,549138940),model:{value:t.filterBy,callback:function(e){t.filterBy=e},expression:"filterBy"}}),t.$q.screen.width>599?a("span",[t._v("Filtrar clinica:")]):t._e(),a("q-select",{staticClass:"inline q-mx-md",staticStyle:{"max-width":"9rem"},attrs:{rounded:"","option-label":"nombre",options:t.clinicas,dense:""},on:{input:t.filtrarPacientes},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"local_hospital"}})]},proxy:!0}],null,!1,180630442),model:{value:t.clinicaSelected,callback:function(e){t.clinicaSelected=e},expression:"clinicaSelected"}}),t.$q.screen.width>599?a("span",[t._v("Ver: ")]):t._e(),a("q-select",{staticClass:"inline q-mx-md",attrs:{outlined:"",options:t.pacientesPorPaginaOptions,dense:""},on:{input:t.filtrarPacientes},model:{value:t.pacientesPorPagina,callback:function(e){t.pacientesPorPagina=e},expression:"pacientesPorPagina"}})],1)])])]):t._e(),!t.visible&&t.pacientes.length>0?a("div",{staticClass:"row"},[t._l(t.pacientesFiltradosPaginados,(function(e){return t.$q.screen.width>599?a("div",{key:e.id,staticClass:"col-12 col-md-6 col-lg-4"},[a("PacienteDesktop",{attrs:{paciente:e}})],1):t._e()})),t._l(t.pacientesFiltradosPaginados,(function(e){return t.$q.screen.width<=599?a("div",{key:e.id,staticClass:"full-width"},[a("PacienteMobile",{attrs:{paciente:e}})],1):t._e()}))],2):t._e(),!t.visible&&t.pacientes.length>0?a("div",{staticClass:"q-pa-lg flex flex-center"},[a("q-pagination",{attrs:{max:t.numPaginas,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},on:{input:t.cambioPagina},model:{value:t.paginaActual,callback:function(e){t.paginaActual=e},expression:"paginaActual"}})],1):t._e(),t.visible||0!=t.pacientes.length?t._e():a("div",{staticClass:"row  items-center justify-center items-center",staticStyle:{height:"85Vh"}},[a("div",{staticClass:"col-12 text-center text-primary"},[a("q-icon",{staticStyle:{"font-size":"8rem"},attrs:{name:"people"}}),a("div",{staticClass:" text-h4  text-weight-bolder"},[t._v("\n        No hay pacientes registrados\n      ")])],1)]),a("q-inner-loading",{attrs:{showing:t.visible}},[a("q-spinner-cube",{attrs:{size:"3rem",color:"primary"}}),a("span",{staticClass:" text-primary\n      text-uppercase\n      text-overline\n      text-weight-bold"},[t._v("Cargando Pacientes")])],1)],1)},s=[],n=(a("ddb0"),a("4e82"),a("fc1b")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-ml-md q-mr-md q-mt-md"},[a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"bg-blue-grey-1 "},[a("div",{staticClass:"row justify-center"},[a("q-avatar",{staticClass:"justify-center",attrs:{size:"5rem"}},[a("q-img",{attrs:{src:t.paciente.foto}})],1)],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"blue-9",flat:"",to:"/paciente/"+t.paciente.id}},[t._v("\n            Expediente\n          ")])],1)])]),a("q-card-section",{staticClass:"full-width"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"text-h6"},[t._v(t._s(t.paciente.nombre))]),a("br"),a("q-icon",{staticClass:"text-red-5",staticStyle:{"font-size":"1.2em"},attrs:{left:"",name:"local_hospital"}}),a("span",{staticClass:"text-caption text-grey-9",staticStyle:{"font-size":"0.8em"}},[t._v(t._s(t.paciente.clinica.nombre)+"\n          ")]),a("br"),a("q-separator"),a("q-icon",{staticClass:"text-green",staticStyle:{"font-size":"1.2em"},attrs:{left:"",name:"location_on"}}),a("span",{staticClass:"text-caption q-mb-md text-grey-7",staticStyle:{"font-size":"0.8em"}},[t._v(t._s(t.paciente.direccion))])],1)]),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-6"},[a("q-icon",{staticClass:"text-indigo",staticStyle:{"font-size":"1.5em"},attrs:{name:"cake"}}),t._v("\n          "+t._s(t.fechaNacimiento)+",\n          "),a("span",{staticClass:"text-weight-regular",staticStyle:{"font-size":"1em"}},[t._v("\n            "+t._s(t.edad)+" años")])],1),a("div",{staticClass:"col-6"},[a("q-icon",{staticClass:"text-red",staticStyle:{"font-size":"1.5em"},attrs:{name:"bloodtype"}}),t._v("\n          "+t._s(t.paciente.tipoSangre)+"\n        ")],1)]),a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-6"},[a("q-icon",{class:"Masculino"==t.paciente.genero?"text-blue":"text-pink",staticStyle:{"font-size":"1.5em"},attrs:{name:"Masculino"==t.paciente.genero?"male":"female"}}),t._v("\n          "+t._s(t.paciente.genero)+"\n        ")],1),a("div",{staticClass:"col-6"},[a("q-icon",{staticStyle:{"font-size":"1.5em"},attrs:{name:"monitor_weight"}}),t._v("\n          "+t._s(t.paciente.peso)+" Lb.\n        ")],1)])])],1)],1)},o=[],r=a("bd4c"),l={name:"PacienteComponent",props:{paciente:Object},computed:{fechaNacimiento(){return r["b"].formatDate(this.paciente.fechaNacimiento,"YYYY-MM-DD")},edad(){var t=new Date,e=new Date(this.paciente.fechaNacimiento),a=t.getFullYear()-e.getFullYear(),i=t.getMonth()-e.getMonth();return(i<0||0===i&&t.getDate()<e.getDate())&&a--,a}}},d=l,p=a("2877"),m=a("f09f"),h=a("a370"),u=a("cb32"),f=a("068f"),g=a("9c40"),v=a("0016"),b=a("eb85"),C=a("eebe"),y=a.n(C),q=Object(p["a"])(d,c,o,!1,null,null,null),_=q.exports;y()(q,"components",{QCard:m["a"],QCardSection:h["a"],QAvatar:u["a"],QImg:f["a"],QBtn:g["a"],QIcon:v["a"],QSeparator:b["a"]});var x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md full-width"},[a("q-expansion-item",{staticClass:"shadow-1 overflow-hidden rounded-borders",scopedSlots:t._u([{key:"header",fn:function(){return[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"4rem"}},[a("q-img",{attrs:{src:t.paciente.foto}})],1)],1),a("q-separator",{staticClass:"q-mr-sm",attrs:{vertical:"",inset:""}}),a("q-item-section",[a("q-item-label",[t._v("\n          "+t._s(t.paciente.nombre)+"\n        ")]),a("q-item-label",{attrs:{caption:"",lines:"1"}},[a("q-icon",{staticClass:"text-green",staticStyle:{"font-size":"1.5em"},attrs:{name:"place"}}),t._v(" "+t._s(t.paciente.direccion)+"\n        ")],1),a("q-item-label",{attrs:{caption:"",lines:"1"}},[a("q-icon",{staticClass:"text-red-5",staticStyle:{"font-size":"1.2em"},attrs:{left:"",name:"local_hospital"}}),a("span",{staticClass:"text-caption text-grey-9",staticStyle:{"font-size":"0.8em"}},[t._v(t._s(t.paciente.clinica.nombre)+"\n          ")])],1)],1)]},proxy:!0}])},[a("q-separator",{attrs:{inset:""}}),a("q-card",[a("q-card-section",[a("div",{staticClass:"row "},[a("div",{staticClass:"col "},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-3 text-center"},[a("q-icon",{staticClass:"text-indigo",staticStyle:{"font-size":"2em"},attrs:{name:"cake"}})],1),a("div",{staticClass:"col"},[a("div",{staticClass:"row  justify-center"},[t._v(t._s(t.fechaNacimiento))]),a("div",{staticClass:"row text-caption justify-center"},[t._v("\n                  "+t._s(t.edad)+" años\n                ")])])])]),a("div",{staticClass:"col"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-3  text-center"},[a("q-icon",{staticClass:"text-red ",staticStyle:{"font-size":"2em"},attrs:{name:"bloodtype"}})],1),a("div",{staticClass:"col text-center"},[t._v("\n                "+t._s(t.paciente.tipoSangre)+"\n              ")])])])]),a("div",{staticClass:"row q-mt-md "},[a("div",{staticClass:"col"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-3 text-center"},[a("q-icon",{class:"Masculino"==t.paciente.genero?"text-blue":"text-pink",staticStyle:{"font-size":"2em"},attrs:{name:"Masculino"==t.paciente.genero?"male":"female"}})],1),a("div",{staticClass:"col text-center"},[t._v("\n                "+t._s(t.paciente.genero)+"\n              ")])])]),a("div",{staticClass:"col"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-3 text-center"},[a("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"monitor_weight"}})],1),a("div",{staticClass:"col text-center"},[t._v("\n                "+t._s(t.paciente.peso)+" lb\n              ")])])])])]),a("q-card-actions",[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Ver Expediente",icon:"assignment",to:"/paciente/"+t.paciente.id}})],1)],1)],1)],1)},w=[],P={props:{paciente:Object},computed:{fechaNacimiento(){return r["b"].formatDate(this.paciente.fechaNacimiento,"DD/MM/YY")},edad(){var t=new Date,e=new Date(this.paciente.fechaNacimiento),a=t.getFullYear()-e.getFullYear(),i=t.getMonth()-e.getMonth();return(i<0||0===i&&t.getDate()<e.getDate())&&a--,a}}},F=P,S=(a("a7ee"),a("3b73")),k=a("4074"),D=a("0170"),Q=a("4b7e"),M=Object(p["a"])(F,x,w,!1,null,"8e28562a",null),B=M.exports;y()(M,"components",{QExpansionItem:S["a"],QItemSection:k["a"],QAvatar:u["a"],QImg:f["a"],QSeparator:b["a"],QItemLabel:D["a"],QIcon:v["a"],QCard:m["a"],QCardSection:h["a"],QCardActions:Q["a"],QBtn:g["a"]});var z={name:"PageIndex",components:{PacienteDesktop:_,PacienteMobile:B},data(){return{visible:!0,search:"",orderBy:"nombre",orderByOptions:["edad","peso","nombre"],orderDescend:!1,paginaActual:1,numPaginas:0,pacientesPorPagina:15,pacientesPorPaginaOptions:[5,10,15,20],totalPacientes:0,pacientesFiltrados:[],pacientesFiltradosPaginados:[],filterBy:"todos",optionFilters:[{slot:"todos",value:"todos"},{slot:"Masculino",value:"Masculino"},{slot:"Femenino",value:"Femenino"}],pacientes:[],clinicas:[{nombre:"todas"}],clinicaSelected:{nombre:"todas"}}},async created(){await this.traerPacientes(),this.filtrarPacientes()},methods:{clearSearch(){this.search="",this.filtrarPacientes()},changeOrder(){this.orderDescend=!this.orderDescend,this.filtrarPacientes()},getEdad(t){var e=new Date,a=new Date(t),i=e.getFullYear()-a.getFullYear(),s=e.getMonth()-a.getMonth();return(s<0||0===s&&e.getDate()<a.getDate())&&i--,i},cambioPagina(){this.pacientesFiltradosPaginados=this.pacientesFiltrados.slice(this.paginaActual*this.pacientesPorPagina-this.pacientesPorPagina,this.paginaActual*this.pacientesPorPagina)},async traerPacientes(){this.pacientes=[];try{const e=await n["b"].collection("pacientes").where("idMedico","==",n["a"].currentUser.uid).get();e.forEach((t=>{var e={id:t.id,nombre:t.data().nombre,direccion:t.data().direccion,fechaNacimiento:t.data().fechaNacimiento,peso:t.data().peso[t.data().peso.length-1],tipoSangre:t.data().tipoSangre,genero:t.data().genero,clinica:t.data().clinica};this.pacientes.push(e)}));const a=await n["b"].collection("clinicas").where("idMedico","==",n["a"].currentUser.uid).get();for(var t of(a.forEach((t=>{var e={id:t.id,nombre:t.data().nombre,direccion:t.data().direccion,telefono:t.data().telefono};this.clinicas.push(e)})),this.pacientes))t.foto=await n["e"].ref().child(t.id+"/perfil.jpg").getDownloadURL();this.visible=!1}catch(e){console.error(e)}},filtrarPacientes(){this.pacientesFiltrados=this.pacientes,""!=this.search&&(this.pacientesFiltrados=this.pacientesFiltrados.filter((t=>{let e=new RegExp(this.search,"i");return e.test(t.nombre)}))),"nombre"==this.orderBy&&0==this.orderDescend?this.pacientesFiltrados=this.pacientesFiltrados.sort(((t,e)=>t.nombre>e.nombre?1:t.nombre<e.nombre?-1:0)):"nombre"==this.orderBy&&1==this.orderDescend&&(this.pacientesFiltrados=this.pacientesFiltrados.sort(((t,e)=>t.nombre>e.nombre?-1:t.nombre<e.nombre?1:0))),"edad"==this.orderBy&&0==this.orderDescend?this.pacientesFiltrados=this.pacientesFiltrados.sort(((t,e)=>this.getEdad(t.fechaNacimiento)-this.getEdad(e.fechaNacimiento))):"edad"==this.orderBy&&1==this.orderDescend&&(this.pacientesFiltrados=this.pacientesFiltrados.sort(((t,e)=>this.getEdad(e.fechaNacimiento)-this.getEdad(t.fechaNacimiento)))),"peso"==this.orderBy&&0==this.orderDescend?this.pacientesFiltrados=this.pacientesFiltrados.sort(((t,e)=>t.peso-e.peso)):"peso"==this.orderBy&&1==this.orderDescend&&(this.pacientesFiltrados=this.pacientesFiltrados.sort(((t,e)=>e.peso-t.peso))),"Masculino"==this.filterBy?this.pacientesFiltrados=this.pacientesFiltrados.filter((t=>"Masculino"==t.genero)):"Femenino"==this.filterBy&&(this.pacientesFiltrados=this.pacientesFiltrados.filter((t=>"Femenino"==t.genero))),"todas"!=this.clinicaSelected.nombre&&(this.pacientesFiltrados=this.pacientesFiltrados.filter((t=>t.clinica.id==this.clinicaSelected.id))),this.paginaActual=1,this.total=this.pacientesFiltrados.length,this.numPaginas=Math.ceil(this.total/this.pacientesPorPagina),this.pacientesFiltradosPaginados=this.pacientesFiltrados.slice(0,this.pacientesPorPagina)}},computed:{}},N=z,E=a("27f9"),j=a("ddd8"),O=a("6a67"),Y=a("05c0"),I=a("3b16"),A=a("74f7"),$=a("a6a3"),L=Object(p["a"])(N,i,s,!1,null,null,null);e["default"]=L.exports;y()(L,"components",{QInput:E["a"],QIcon:v["a"],QSelect:j["a"],QBtn:g["a"],QBtnToggle:O["a"],QTooltip:Y["a"],QPagination:I["a"],QInnerLoading:A["a"],QSpinnerCube:$["a"]})},a7ee:function(t,e,a){"use strict";a("a8bb")},a8bb:function(t,e,a){}}]);