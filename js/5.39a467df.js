(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"1ef4":function(i,t,a){},"4a1f":function(i,t,a){"use strict";a("1ef4")},cddc:function(i,t,a){"use strict";a.r(t);var e=function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"relative-position",style:i.visible?"height: 92Vh":""},[!i.visible&&i.clinicas.length>0?a("div",{staticClass:"row q-pa-lg"},[i._l(i.clinicas,(function(t,e){return a("div",{key:t.id,staticClass:"col-12 col-md-6 q-pa-md"},[a("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{staticStyle:{"font-size":"3rem"},attrs:{name:"apartment"}}),a("div",[a("div",{staticClass:"text-h6"},[i._v(i._s(t.nombre))]),a("div",{staticClass:"text-subtitle2"},[a("q-icon",{attrs:{name:"phone"}}),i._v("\n              "+i._s(t.telefono)+"\n            ")],1),a("div",{staticClass:"text-caption text-blue-grey"},[a("q-icon",{attrs:{name:"people"}}),i._v("\n              "+i._s(t.pacientesNum)+" pacientes\n            ")],1)]),a("q-space"),a("div",[a("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"edit",to:"/clinica/editar/"+t.id}},[a("q-tooltip",[i._v("\n                Editar Clinica\n              ")])],1),a("q-btn",{attrs:{flat:"",round:"",color:"red",icon:"delete"},on:{click:function(a){return i.preguntaClinica(t,e)}}},[a("q-tooltip",[i._v("\n                Borrar Clinica\n              ")])],1)],1)],1),a("q-separator",{attrs:{inset:""}}),a("q-expansion-item",{staticClass:"clinicaCard",scopedSlots:i._u([{key:"header",fn:function(){return[a("q-tooltip",[i._v("\n              Ver direccion\n            ")]),a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"place"}})],1),a("q-item-section",[i._v("\n              DirecciÃ³n\n            ")])]},proxy:!0}],null,!0)},[a("q-card",{class:i.$q.dark.isActive?"text-white":"text-black"},[a("q-card-section",[a("div",[i._v("\n                "+i._s(t.direccion.pais)+",\n                "+i._s(t.direccion.departamento)+",\n                "+i._s(t.direccion.municipio)+",\n                "+i._s(t.direccion.colonia)+",\n                "+i._s(t.direccion.calle)+"\n              ")]),a("div",{staticClass:"text-caption text-blue-grey q-mt-sm"},[i._v("\n                Punto de referencia: "+i._s(t.direccion.referencia)+"\n              ")])])],1)],1)],1)],1)})),a("div",{staticClass:"col-12"},[a("q-btn",{staticClass:"q-ml-md",attrs:{to:"/clinica/nueva",color:"blue-10",label:"Nueva Clinica","icon-right":"add"}},[a("q-tooltip",[i._v("\n          Crear Clinica\n        ")])],1)],1)],2):i._e(),i.visible||0!=i.clinicas.length?i._e():a("div",{staticClass:"row  items-center justify-center items-center",staticStyle:{height:"85Vh"}},[a("div",{staticClass:"col-12 text-center text-primary"},[a("q-icon",{staticStyle:{"font-size":"8rem"},attrs:{name:"local_hospital"}}),a("div",{staticClass:" text-h4  text-weight-bolder"},[i._v("\n        No hay clinicas registradas\n      ")]),a("q-btn",{staticClass:"q-mt-md",attrs:{to:"/clinica/nueva",color:"blue-10",label:"Nueva Clinica","icon-right":"add"}},[a("q-tooltip",[i._v("\n          Crear Clinica\n        ")])],1)],1)]),a("q-inner-loading",{attrs:{showing:i.visible}},[a("q-spinner-cube",{attrs:{size:"3rem",color:"primary"}}),a("span",{staticClass:" text-primary\n      text-uppercase\n      text-overline\n      text-weight-bold"},[i._v("Cargando Clinicas")])],1),a("q-dialog",{attrs:{persistent:""},model:{value:i.confirm,callback:function(t){i.confirm=t},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{staticClass:"text-red",staticStyle:{"font-size":"2rem"},attrs:{name:"warning"}}),a("span",{staticClass:"q-ml-sm"},[i._v("\n          Esta seguro que desea borrar la clinica\n          "),a("strong",[i._v('"'+i._s(i.clinicaBorrar.nombre)+'"')])])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Borrar",color:"red"},on:{click:i.eliminarClinica}})],1)],1)],1)],1)},c=[],n=(a("ddb0"),a("fc1b")),r={data(){return{visible:!0,confirm:!1,clinicaBorrar:{},clinicas:[]}},async created(){await this.traerClinicas(),this.visible=!1},methods:{async traerClinicas(){this.clinicas=[];try{const i=await n["b"].collection("clinicas").where("idMedico","==",n["a"].currentUser.uid).get();i.forEach((i=>{var t=i.data();t.id=i.id,this.clinicas.push(t)}));for(const t of this.clinicas){const i=await n["b"].collection("pacientes").where("clinica.id","==",t.id).get();t.pacientesNum=i.size}}catch(i){console.error(i)}},preguntaClinica(i,t){0==i.pacientesNum?(this.clinicaBorrar=i,this.clinicaBorrar.index=t,this.confirm=!0):this.$q.notify({message:"No se puede eliminar clinicas con pacientes! Cambie a los pacientes de clinica primero",color:"red",icon:"error"})},async eliminarClinica(){try{await n["b"].collection("clinicas").doc(this.clinicaBorrar.id).delete();this.clinicas.splice(this.clinicaBorrar.index,1),this.clinicaBorrar={},this.$q.notify({message:"Se elimino la clinica satisfactoriamente",color:"green",icon:"check_circle"}),this.confirm=!1}catch(i){console.error(i),this.$q.notify({message:"Se produjo un error al eliminar la clinica",color:"red",icon:"error"})}}}},s=r,o=(a("4a1f"),a("2877")),l=a("f09f"),d=a("a370"),p=a("0016"),m=a("2c91"),u=a("9c40"),v=a("05c0"),h=a("eb85"),b=a("3b73"),f=a("4074"),C=a("cb32"),q=a("74f7"),_=a("a6a3"),g=a("24e8"),y=a("4b7e"),x=a("7f67"),w=a("eebe"),Q=a.n(w),S=Object(o["a"])(s,e,c,!1,null,null,null);t["default"]=S.exports;Q()(S,"components",{QCard:l["a"],QCardSection:d["a"],QIcon:p["a"],QSpace:m["a"],QBtn:u["a"],QTooltip:v["a"],QSeparator:h["a"],QExpansionItem:b["a"],QItemSection:f["a"],QAvatar:C["a"],QInnerLoading:q["a"],QSpinnerCube:_["a"],QDialog:g["a"],QCardActions:y["a"]}),Q()(S,"directives",{ClosePopup:x["a"]})}}]);