(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{e97f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"lHh LpR lFf"},on:{scroll:t.onScroll}},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(e){return t.$refs.menu.openCloseDrawer()}}}),a("q-toolbar-title",[t._v(" Nueva Consulta ")]),a("q-btn",{staticClass:"lt-md",attrs:{flat:"",round:"",dense:"",icon:"menu"},on:{click:t.test}})],1)],1),a("Menu",{ref:"menu"}),a("q-drawer",{attrs:{"show-if-above":"",bordered:"",side:"right"},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[a("NavegacionConsulta",{ref:"nav"})],1),a("q-page-container",[a("q-page",{staticClass:"q-pt-none",attrs:{padding:""}},[a("div",{attrs:{id:"pasar-consulta"}},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-12 col-sm-7 justify-between"},[a("h2",{staticClass:"text-h2"},[t._v("Pasar Consulta")])]),a("div",{staticClass:"col-12 col-sm-5 column justify-center"},[a("q-btn",{staticClass:"q-my-sm",attrs:{color:"primary",icon:"keyboard_arrow_left",to:"/paciente/"+this.$router.currentRoute.params.id}},[t._v("\n              Regresar al expediente\n              "),a("q-tooltip",{attrs:{"content-class":"bg-accent text-white","content-style":"font-size: 12px",anchor:"top left",self:"bottom left",offset:[0,8]}},[t._v("Regresar al expediente")])],1),a("q-btn",{staticClass:"q-my-sm",attrs:{color:"secondary",icon:"save",type:"submit"},on:{click:function(e){return t.agregarConsulta()}}},[t._v("\n              Registrar Consulta\n              "),a("q-tooltip",{attrs:{"content-class":"bg-accent text-white","content-style":"font-size: 12px",anchor:"top left",self:"bottom left",offset:[0,8]}},[t._v("Registrar una nueva consulta")])],1)],1)]),a("div",{staticClass:"row justify-center"},[a("q-input",{staticClass:"q-mx-md q-my-md",staticStyle:{"max-width":"7rem","min-width":"5rem"},attrs:{type:"number",min:"0",outlined:"",suffix:"lb",label:"peso",required:"","lazy-rules":""},model:{value:t.form_data.peso,callback:function(e){t.$set(t.form_data,"peso",e)},expression:"form_data.peso"}}),a("q-input",{staticClass:"q-mx-md q-my-md",staticStyle:{"max-width":"7rem","min-width":"5rem"},attrs:{type:"number",min:"1",outlined:"",suffix:"cm",label:"estatura",required:"","lazy-rules":""},model:{value:t.form_data.estatura,callback:function(e){t.$set(t.form_data,"estatura",e)},expression:"form_data.estatura"}}),a("q-input",{staticClass:"q-mx-md q-my-md",staticStyle:{"max-width":"7rem","min-width":"5rem"},attrs:{type:"number",min:"0",outlined:"",suffix:"°C",label:"temperatura",required:"","lazy-rules":""},model:{value:t.form_data.temperatura,callback:function(e){t.$set(t.form_data,"temperatura",e)},expression:"form_data.temperatura"}}),a("q-input",{staticClass:"q-mx-md q-my-md",staticStyle:{"max-width":"7rem","min-width":"5rem"},attrs:{type:"number",min:"0",outlined:"",suffix:"kg/m2",label:"imc",required:"","lazy-rules":""},model:{value:t.form_data.imc,callback:function(e){t.$set(t.form_data,"imc",e)},expression:"form_data.imc"}}),a("q-input",{staticClass:"q-mx-md q-my-md",staticStyle:{width:"8rem","min-width":"7rem"},attrs:{mask:"###/##",min:"0/0",outlined:"",suffix:"mmHg",label:"presión",required:"","lazy-rules":""},model:{value:t.form_data.presionArterial,callback:function(e){t.$set(t.form_data,"presionArterial",e)},expression:"form_data.presionArterial"}})],1),a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("p",[t._v("Motivo de Consulta")]),a("q-input",{ref:"motivo",attrs:{filled:"",label:"Motivo de consulta",type:"textarea",required:"","lazy-rules":"",rules:[function(t){return!!t||"Campo requerido"}]},model:{value:t.form_data.motivoConsulta,callback:function(e){t.$set(t.form_data,"motivoConsulta",e)},expression:"form_data.motivoConsulta"}}),a("p",[t._v("Sintomas")]),a("q-editor",{attrs:{toolbar:t.toolbar,"min-height":"7rem",required:""},model:{value:t.form_data.sintomas,callback:function(e){t.$set(t.form_data,"sintomas",e)},expression:"form_data.sintomas"}}),a("p",[t._v("Diagnostico")]),a("q-editor",{attrs:{toolbar:t.toolbar,"min-height":"7rem",required:""},model:{value:t.form_data.diagnostico,callback:function(e){t.$set(t.form_data,"diagnostico",e)},expression:"form_data.diagnostico"}})],1)]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("p",[t._v("Exploracion fisica")]),a("q-editor",{attrs:{toolbar:t.toolbar,"min-height":"7rem",required:""},model:{value:t.form_data.exploracionFisica,callback:function(e){t.$set(t.form_data,"exploracionFisica",e)},expression:"form_data.exploracionFisica"}}),a("br"),a("p",[t._v("Examenes")]),a("q-editor",{attrs:{toolbar:t.toolbar,"min-height":"7rem",required:""},model:{value:t.form_data.examenes,callback:function(e){t.$set(t.form_data,"examenes",e)},expression:"form_data.examenes"}}),a("p",[t._v("Recetas")]),a("q-editor",{ref:"receta",attrs:{toolbar:t.toolbar,"min-height":"7rem",required:"","lazy-rules":"",rules:[function(t){return!!t||"Campo requerido"}]},model:{value:t.form_data.receta,callback:function(e){t.$set(t.form_data,"receta",e)},expression:"form_data.receta"}})],1)])]),a("hr",{staticClass:"lt-md"}),a("div",{staticClass:"row justify-center items-baseline"},[a("q-btn",{staticClass:"q-my-sm",staticStyle:{"margin-left":"auto","margin-right":"auto"},attrs:{color:"primary",icon:"keyboard_arrow_left",to:"/paciente/"+this.$router.currentRoute.params.id}},[t._v("\n              Regresar al expediente\n              "),a("q-tooltip",{attrs:{"content-class":"bg-accent text-white","content-style":"font-size: 12px",anchor:"top left",self:"bottom left",offset:[0,8]}},[t._v("Regresar al expediente")])],1),a("q-input",{ref:"proximaCita",staticClass:"q-my-sm",staticStyle:{"margin-left":"auto","margin-right":"auto"},attrs:{dense:"",filled:"",type:"date",label:"Próxima Cita","stack-label":"","lazy-rules":""},model:{value:t.form_data.proximaCita,callback:function(e){t.$set(t.form_data,"proximaCita",e)},expression:"form_data.proximaCita"}}),a("q-btn",{staticClass:"q-my-sm",staticStyle:{"margin-left":"auto","margin-right":"auto"},attrs:{color:"secondary",icon:"save",type:"submit"},on:{click:function(e){return t.agregarConsulta()}}},[t._v("\n              Registrar Consulta\n              "),a("q-tooltip",{attrs:{"content-class":"bg-accent text-white","content-style":"font-size: 12px",anchor:"top left",self:"bottom left",offset:[0,8]}},[t._v("Registrar una nueva consulta")])],1)],1)])])],1)],1)},o=[],i=a("ded3"),r=a.n(i),n=(a("e6cf"),a("52e4")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"row justify-center q-pb-xs"},[a("q-avatar",{staticClass:"q-mx-auto",attrs:{square:"",rounded:"",size:"85px"}},[a("img",{attrs:{src:t.fotoPerfil}})])],1),t.paciente?a("div",{staticClass:"text-h6 q-pb-xs"},[t._v(t._s(t.paciente.nombre))]):t._e()])],1),a("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"350px"}},[a("q-list",[a("q-expansion-item",{staticClass:"overflow-hidden",attrs:{icon:"book","expand-separator":"",group:"somegroup",label:"Antecedentes"}},[t.paciente?a("q-card-section",{domProps:{innerHTML:t._s(t.paciente.antecedentes)}}):t._e()],1),a("q-expansion-item",{staticClass:" overflow-hidden",attrs:{icon:"medication",group:"somegroup","expand-separator":"",label:"Medicamentos Permantentes"}},[t.paciente?a("q-card-section",{domProps:{innerHTML:t._s(t.paciente.medicamentosPermanentes)}}):t._e()],1),a("q-expansion-item",{staticClass:" overflow-hidden",attrs:{icon:"healing",group:"somegroup","expand-separator":"",label:"Consultas","header-class":"claseheader"}},[a("q-card-section",{attrs:{dense:""}},[t.consulta?a("div",{staticClass:"text-h6",attrs:{dense:""}},[t._v(t._s(t.fechaSimp))]):t._e(),a("div",{staticClass:"text-subtitle2",attrs:{dense:""}},[t._v("fecha de ultima consulta")])]),t.consulta?a("q-card-section",{staticClass:"q-pt-none",attrs:{dense:""}},[a("q-card-section",{attrs:{dense:""},domProps:{innerHTML:t._s(t.consulta.diagnostico)}})],1):t._e()],1),a("q-expansion-item",{staticClass:" overflow-hidden",attrs:{icon:"description",group:"somegroup",label:"Recetas","expand-separator":"","header-class":"claseheader"}},[a("q-card-section",{attrs:{dense:""}},[t.consulta?a("div",{staticClass:"text-h6"},[t._v(t._s(t.fechaSimp))]):t._e(),a("div",{staticClass:"text-subtitle2"},[t._v("Receta de la ultima consulta")])]),t.consulta?a("q-card-section",{attrs:{dense:""},domProps:{innerHTML:t._s(t.consulta.receta)}}):t._e()],1),a("q-expansion-item",{staticClass:" overflow-hidden",attrs:{icon:"collections",group:"somegroup",label:"Archivos","expand-separator":"","header-class":"claseheader"}},[a("testGaleriaComponent",{attrs:{idPaciente:this.$router.currentRoute.params.id}})],1),a("q-expansion-item",{staticClass:" overflow-hidden",attrs:{icon:"monitor_weight",group:"somegroup",label:"Peso","expand-separator":"","header-class":"claseheader",active:"bg-teal text-white"}},[a("q-card-section",[t.datosGraficaPeso?a("Grafica",{attrs:{datosGrafica:t.datosGraficaPeso,numerosGrafica:t.numerosGraficaPeso,label:"Peso"}}):t._e()],1)],1),a("br"),a("div",{staticClass:"column align-center "},[t.paciente?a("q-btn",{staticClass:"full-width",attrs:{color:"secondary",label:"Cancelar consulta",to:"/paciente/"+t.paciente.id}}):t._e()],1)],1)],1)])},c=[],d=a("a3eb"),m=a("fc1b"),u=a("c4af"),p={components:{TestGaleriaComponent:d["default"],Grafica:u["a"]},data:()=>({paciente:null,consulta:null,fotoPerfil:"",datosGraficaPeso:null,numerosGraficaPeso:[],diferenciaFechas:[],pacienteid:"",fechaSimp:"",report:"",style:{width:"200px",height:"200px"}}),created(){this.obtenerDatosPaciente(),this.obtenerConsultas()},methods:{onResize(t){console.log(t),this.report=t},obtenerDatosPaciente(){let t=this.$router.currentRoute.params.id;var e=m["b"].collection("pacientes").doc(t);e.get().then((t=>{if(t.exists){let e=t.data();this.paciente=r()({id:t.id},e),this.datosGraficaPeso=this.paciente.peso>5?this.paciente.peso.slice(-5):this.paciente.peso;for(let t=1;t<=this.datosGraficaPeso.length;t++)this.numerosGraficaPeso.push(t);m["e"].ref(t.data().foto).getDownloadURL().then((t=>{this.fotoPerfil=t}))}else console.log("No such document!")})).catch((t=>{console.log("Error getting document:",t)}))},obtenerConsultas(){m["b"].collection("consultas").where("idPaciente","==",this.$router.currentRoute.params.id).get().then((t=>{t.docs.forEach((t=>{let e=t.data();this.consulta=e,Object.defineProperty(e,"id",{value:t.id,writable:!0,enumerable:!0,configurable:!0});var a=this.consulta.fecha.toDate();this.fechaSimp=a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()}))}))},obtenerFecha(){},obtenerPacienteId(){let t=this.$router.currentRoute.params.id;this.pacienteid=t}}},f=p,h=a("2877"),b=a("f09f"),g=a("a370"),v=a("cb32"),_=a("1c1c"),x=a("3b73"),q=a("9c40"),C=a("eebe"),y=a.n(C),w=Object(h["a"])(f,l,c,!1,null,null,null),$=w.exports;y()(w,"components",{QCard:b["a"],QCardSection:g["a"],QAvatar:v["a"],QList:_["a"],QExpansionItem:x["a"],QBtn:q["a"]});var R=a("fb62"),P={components:{perfil:n["a"],navegacionConsulta:$,Examenes:d["default"],Menu:R["a"],NavegacionConsulta:$},data(){return{error:!1,drawerRight:!1,scrollInfo:{},spyMovil:!1,paciente:{},pesos:[],estaturas:[],form_data:{id:"",idPaciente:this.$router.currentRoute.params.id,peso:0,estatura:0,temperatura:0,imc:0,presionArterial:"",exploracionFisica:"",motivoConsulta:"",sintomas:"",diagnostico:"",receta:"",examenes:"",diagnostico:"",fecha:"",proximaCita:""},toolbar:[["bold","italic","strike","underline"],["unordered","ordered","outdent","indent"]]}},created(){m["b"].collection("pacientes").doc(this.$router.currentRoute.params.id).get().then((t=>{if(t.exists){let e=t.data();this.paciente=r()({id:t.id},e)}this.pesos=this.paciente.peso,this.estaturas=this.paciente.estatura,console.log(this.paciente)}))},methods:{limpiarFormulario(){this.form_data.peso=0,this.form_data.estatura=0,this.form_data.temperatura=0,this.form_data.presionArterial=0,this.form_data.imc=0,this.form_data.motivoConsulta="",this.form_data.sintomas="",this.form_data.exploracionFisica="",this.form_data.examenes="",this.form_data.receta="",this.form_data.proximaCita="",this.form_data.diagnostico=""},cancelar(){this.showNotif("Consulta cancelada.","negative","close")},validar(){this.$refs.proximaCita.validate(),this.$refs.motivo.validate(),this.$refs.proximaCita.hasError||this.form_data.peso<0||this.form_data.estatura<0||this.$refs.motivo.hasError?this.error=!0:this.error=!1},async agregarConsulta(){if(console.info(this.form_data),this.validar(),!0===this.error)this.showNotif("Necesita rellenar los campos requeridos (Motivo Consulta).","negative","close");else try{console.log("HOla"),this.$q.loading.show(),this.pesos.push(this.form_data.peso),this.estaturas.push(this.form_data.estatura);var t=new Date,e=new Date(t.toString());console.log(e),this.form_data.fecha=t,console.log("esta es la fecha"+this.form_data.fecha);await m["b"].collection("consultas").add(this.form_data);this.actualizarPesos(),this.limpiarFormulario(),console.log(this.$router.currentRoute.path),this.showNotif("Se ha guardado la consulta","positive","check"),this.$router.push("/paciente/"+this.$router.currentRoute.params.id)}catch(a){console.log(a)}finally{this.$q.loading.hide()}},actualizarPesos(){return console.log("Estos son los pesos "+this.paciente),m["b"].collection("pacientes").doc(this.$router.currentRoute.params.id).update({peso:this.pesos,estatura:this.estaturas}).then((function(){console.log("peso actualizado")})).catch((function(t){console.log("no se pudo actualizar peso",t)}))},showNotif(t,e,a){this.$q.notify({message:t,color:e,timeout:1e3,icon:a,position:"top"})},onScroll(t){0==this.spyMovil&&(this.scrollInfo=t)},test(){this.spyMovil=!0,this.drawerRight=!this.drawerRight}},watch:{drawerRight:function(t){0==this.drawerRight&&this.spyMovil&&(this.spyMovil=!1)}}},k=P,S=a("4d5a"),z=a("e359"),M=a("65c6"),Q=a("6ac5"),G=a("9404"),E=a("09e3"),F=a("9989"),D=a("05c0"),j=a("27f9"),N=a("d66b"),T=Object(h["a"])(k,s,o,!1,null,"102fbacd",null);e["default"]=T.exports;y()(T,"components",{QLayout:S["a"],QHeader:z["a"],QToolbar:M["a"],QBtn:q["a"],QToolbarTitle:Q["a"],QDrawer:G["a"],QPageContainer:E["a"],QPage:F["a"],QTooltip:D["a"],QInput:j["a"],QEditor:N["a"]})}}]);